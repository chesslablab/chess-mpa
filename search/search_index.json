{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Website Chess developers and business owners can now run their own open-source based platform more easily than ever before because the ChesslaBlab website is super-duper simple to install and set up. To give you an idea of its simplicity, the assets/js folder contains less than 3,000 lines of JavaScript code. cloc assets/js 80 text files. 80 unique files. 0 files ignored. github.com/AlDanial/cloc v 1.90 T=0.05 s (1474.8 files/s, 59028.2 lines/s) ------------------------------------------------------------------------------- Language files blank comment code ------------------------------------------------------------------------------- JavaScript 80 311 33 2858 ------------------------------------------------------------------------------- SUM: 80 311 33 2858 ------------------------------------------------------------------------------- This is made possible with object-oriented programming (OOP) using JavaScript modules . Now you can get rid of libraries and frameworks like React, Vue, Next.js, as well as transpilers, bundlers and so on. The ChesslaBlab website is written using OOP and the DOM. The following repositories are required to run a DeChess platform with ChesslaBlab: Website PHP Chess Server PHP Chess API Chess Data It is recommended to run the entire chess platform using four different servers on production, one per repository, especially if your site is expected to hit a significant amount of visits. However, everything can be run on a humble machine. In fact, the documentation examples are run in a development environment using these ports for each of the repositories, respectively. 443 8443 9443 3306 Remember, this is because multiple applications can't listen on the same port on the same host.","title":"Home"},{"location":"#website","text":"Chess developers and business owners can now run their own open-source based platform more easily than ever before because the ChesslaBlab website is super-duper simple to install and set up. To give you an idea of its simplicity, the assets/js folder contains less than 3,000 lines of JavaScript code. cloc assets/js 80 text files. 80 unique files. 0 files ignored. github.com/AlDanial/cloc v 1.90 T=0.05 s (1474.8 files/s, 59028.2 lines/s) ------------------------------------------------------------------------------- Language files blank comment code ------------------------------------------------------------------------------- JavaScript 80 311 33 2858 ------------------------------------------------------------------------------- SUM: 80 311 33 2858 ------------------------------------------------------------------------------- This is made possible with object-oriented programming (OOP) using JavaScript modules . Now you can get rid of libraries and frameworks like React, Vue, Next.js, as well as transpilers, bundlers and so on. The ChesslaBlab website is written using OOP and the DOM. The following repositories are required to run a DeChess platform with ChesslaBlab: Website PHP Chess Server PHP Chess API Chess Data It is recommended to run the entire chess platform using four different servers on production, one per repository, especially if your site is expected to hit a significant amount of visits. However, everything can be run on a humble machine. In fact, the documentation examples are run in a development environment using these ports for each of the repositories, respectively. 443 8443 9443 3306 Remember, this is because multiple applications can't listen on the same port on the same host.","title":"Website"},{"location":"api-connection/","text":"API Connection The ChesslaBlab website is also connected to the PHP Chess API which is a REST-like API that provides chess functionality over an HTTP connection. While the WebSocket server can handle multiple concurrent connections based on real-time commands, the API endpoints may take a little longer to execute \u2014 for example, a file download or a database query. The environment variables required for the API can be found in the assets/env.example.js file. try { const res = await fetch(`${env.API_SCHEME}://${env.API_HOST}:${env.API_PORT}/${env.API_VERSION}/stats/opening`, { method: 'GET' }); const json = await res.json(); // ... } catch (error) { // ... } finally { // ... } As a rule of thumb, the API requests are made synchronously like in the example above. The await operator is used to wait for the promise to be resolved inside a try...catch...finally statement. The try , catch and finally blocks are used to handle errors.","title":"API Connection"},{"location":"api-connection/#api-connection","text":"The ChesslaBlab website is also connected to the PHP Chess API which is a REST-like API that provides chess functionality over an HTTP connection. While the WebSocket server can handle multiple concurrent connections based on real-time commands, the API endpoints may take a little longer to execute \u2014 for example, a file download or a database query. The environment variables required for the API can be found in the assets/env.example.js file. try { const res = await fetch(`${env.API_SCHEME}://${env.API_HOST}:${env.API_PORT}/${env.API_VERSION}/stats/opening`, { method: 'GET' }); const json = await res.json(); // ... } catch (error) { // ... } finally { // ... } As a rule of thumb, the API requests are made synchronously like in the example above. The await operator is used to wait for the promise to be resolved inside a try...catch...finally statement. The try , catch and finally blocks are used to handle errors.","title":"API Connection"},{"location":"blog/","text":"Blog A static SEO-optimized blog has been set up to allow chess content creators to share stories with the world. A static blog differs from a dynamic blog in that the content is stored in Markdown files as opposed to in a database. Figure 1 . Click on Blog The posts are stored in the file system in the blog folder. Two sample posts are provided in two languages: English and Spanish . The sitemap.xml file is generated on request based on the routes defined in the config/routing/blog.yaml file. As you can see, all blog routes are prefixed with the word blog . The blog.yaml file is intended to encode the metadata of the posts into multiple languages.","title":"Blog"},{"location":"blog/#blog","text":"A static SEO-optimized blog has been set up to allow chess content creators to share stories with the world. A static blog differs from a dynamic blog in that the content is stored in Markdown files as opposed to in a database. Figure 1 . Click on Blog The posts are stored in the file system in the blog folder. Two sample posts are provided in two languages: English and Spanish . The sitemap.xml file is generated on request based on the routes defined in the config/routing/blog.yaml file. As you can see, all blog routes are prefixed with the word blog . The blog.yaml file is intended to encode the metadata of the posts into multiple languages.","title":"Blog"},{"location":"html-iframes/","text":"HTML Iframes Chess authors can engage with readers on their ChesslaBlab website by embedding chess functionality into their publications. Analysis Board Add the following sample HTML code to your blog post: <iframe title=\"E25 Nimzo-Indian Defense: S\u00e4misch Variation, Keres Variation\" width=\"100%\" onload=\"resize(this)\" src=\"https://chesslablab.org/en/iframe/analysis/classical/rnbqk2r%2Fpppp1ppp%2F4pn2%2F8%2F1bPP4%2F2N5%2FPP2PPPP%2FR1BQKBNR%20w%20KQkq%20-/4.f3%20d5%205.a3%20Bxc3%2B%206.bxc3%20c5%207.cxd5%20Nxd5%208.dxc5\" > </iframe> Figure 1 . E25 Nimzo-Indian Defense: S\u00e4misch Variation, Keres Variation. Parameters variant The chess variant as per these options. classical chess, also known as standard or slow chess. 960 is the same as classical chess except that the starting position of the pieces is randomized. dunsany is an asymmetric variant in which Black has the standard chess army and White has 32 pawns. losing chess, the objective of each player is to lose all of their pieces or be stalemated. racing-kings consists of being the first player to move their king to the eighth row. fen An URL-encoded FEN string. movetext An URL-encoded movetext. startPos (optional) The start position in a Chess960 game; for example BRNNKBRQ .","title":"HTML Iframes"},{"location":"html-iframes/#html-iframes","text":"Chess authors can engage with readers on their ChesslaBlab website by embedding chess functionality into their publications.","title":"HTML Iframes"},{"location":"html-iframes/#analysis-board","text":"Add the following sample HTML code to your blog post: <iframe title=\"E25 Nimzo-Indian Defense: S\u00e4misch Variation, Keres Variation\" width=\"100%\" onload=\"resize(this)\" src=\"https://chesslablab.org/en/iframe/analysis/classical/rnbqk2r%2Fpppp1ppp%2F4pn2%2F8%2F1bPP4%2F2N5%2FPP2PPPP%2FR1BQKBNR%20w%20KQkq%20-/4.f3%20d5%205.a3%20Bxc3%2B%206.bxc3%20c5%207.cxd5%20Nxd5%208.dxc5\" > </iframe> Figure 1 . E25 Nimzo-Indian Defense: S\u00e4misch Variation, Keres Variation.","title":"Analysis Board"},{"location":"html-iframes/#parameters","text":"","title":"Parameters"},{"location":"html-iframes/#variant","text":"The chess variant as per these options. classical chess, also known as standard or slow chess. 960 is the same as classical chess except that the starting position of the pieces is randomized. dunsany is an asymmetric variant in which Black has the standard chess army and White has 32 pawns. losing chess, the objective of each player is to lose all of their pieces or be stalemated. racing-kings consists of being the first player to move their king to the eighth row.","title":"variant"},{"location":"html-iframes/#fen","text":"An URL-encoded FEN string.","title":"fen"},{"location":"html-iframes/#movetext","text":"An URL-encoded movetext.","title":"movetext"},{"location":"html-iframes/#startpos-optional","text":"The start position in a Chess960 game; for example BRNNKBRQ .","title":"startPos (optional)"},{"location":"installation/","text":"Installation Setup Clone the chesslablab/website repo into your projects folder. Then cd the website directory and install the Composer dependencies: composer install Set up the browser environment variables: cp assets/env.example.js assets/env.js Clear the cache: php bin/console cache:clear Download the assets: php bin/console importmap:install Compile the assets: php bin/console asset-map:compile Set up file permissions for the var/cache folder: sudo chmod 775 -R var/cache sudo chown $USER:www-data -R var/cache Set up file permissions for the var/log folder: sudo chmod 775 -R var/cache sudo chown $USER:www-data -R var/log Run on a Docker Container First things first, make sure to have created the fullchain.pem and privkey.pem files into the docker/nginx/ssl folder. Development Run the app on port 443 . docker compose -f docker-compose.dev.yml up -d Production Run the app on port 443 . docker compose -f docker-compose.prod.yml up -d","title":"Installation"},{"location":"installation/#installation","text":"","title":"Installation"},{"location":"installation/#setup","text":"Clone the chesslablab/website repo into your projects folder. Then cd the website directory and install the Composer dependencies: composer install Set up the browser environment variables: cp assets/env.example.js assets/env.js Clear the cache: php bin/console cache:clear Download the assets: php bin/console importmap:install Compile the assets: php bin/console asset-map:compile Set up file permissions for the var/cache folder: sudo chmod 775 -R var/cache sudo chown $USER:www-data -R var/cache Set up file permissions for the var/log folder: sudo chmod 775 -R var/cache sudo chown $USER:www-data -R var/log","title":"Setup"},{"location":"installation/#run-on-a-docker-container","text":"First things first, make sure to have created the fullchain.pem and privkey.pem files into the docker/nginx/ssl folder.","title":"Run on a Docker Container"},{"location":"installation/#development","text":"Run the app on port 443 . docker compose -f docker-compose.dev.yml up -d","title":"Development"},{"location":"installation/#production","text":"Run the app on port 443 . docker compose -f docker-compose.prod.yml up -d","title":"Production"},{"location":"ssl-certificate-setup/","text":"SSL Certificate Setup Some familiarity with Public Key Infrastructure (PKI) is recommended in order to follow this section. The first thing you need to understand about setting up a ChesslaBlab website is that you have to create an SSL certificate to secure four different domain names at once. chesslablab.org www.chesslablab.org api.chesslablab.org async.chesslablab.org This is because nowadays, major browsers want all traffic to be secure, and as a web developer you want the development environment to mimic production as much as possible. The first two domain names, chesslablab.org and www.chesslablab.org , will point to the IP of the website . When it comes to websites, it is a common practice to create a domain alias that redirects to the primary domain. Hence the two domain names for the website, one starting with www. The api.chesslablab.org domain name will point to the IP of the REST-like API and async.chesslablab.org to the IP of the asynchronous chess server . Use custom domain names to configure your ChesslaBlab site whether you are a chess club, a school, or a FIDE titled player. gmalice.com www.gmalice.com api.gmalice.com async.gmalice.com Probably the easiest way to proceed is to purchase a wildcard certificate from a Certificate Authority (CA) however you may want to consider to get your free certificates using Certbot instead. Be that as it may, keep in mind that before any CA can issue an SSL certificate, a validation process is required to verify that it can be sent to the Certificate Signing Request (CSR) requester. This is typically achieved through one of the following methods. Email Validation \u2014 a validation email is sent to the certificate requester. HTTP Validation \u2014 the certificate requester is asked to upload a validation file at their host. DNS Validation \u2014 the certificate requester sets up a CNAME record in the domain's DNS zone for further validation. I used Certbot to automatically get a free HTTPS certificate. Since the ChesslaBlab website is running on an Ubuntu server, the certificate was validated through DNS as it is described next. sudo certbot certonly --standalone Saving debug log to /var/log/letsencrypt/letsencrypt.log Please enter the domain name(s) you would like on your certificate (comma and/or space separated) (Enter 'c' to cancel): chesslablab.org www.chesslablab.org api.chesslablab.org async.chesslablab.org Requesting a certificate for chesslablab.org and 3 more domains Successfully received certificate. Certificate is saved at: /etc/letsencrypt/live/chesslablab.org-0001/fullchain.pem Key is saved at: /etc/letsencrypt/live/chesslablab.org-0001/privkey.pem This certificate expires on 2024-04-23. These files will be updated when the certificate renews. Certbot has set up a scheduled task to automatically renew this certificate in the background. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - If you like Certbot, please consider supporting our work by: * Donating to ISRG / Let's Encrypt: https://letsencrypt.org/donate * Donating to EFF: https://eff.org/donate-le - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - The certbot command generated two files, fullchain.pem and privkey.pem , that then were installed in each of the repos listed above: chesslablab/website chesslablab/chess-api chesslablab/chess-server It is worth saying that for this to function properly, Certbot's documentation recommends to have a working web site that can already be accessed using HTTP on port 80. Self-Signed Wildcard SSL Certificate with OpenSSL If issuing a wildcard certificate with DNS validation sounds too complicated to you, OpenSSL might be an alternate solution for the development environment. You may want to create a self-signed multi-domain SSL certificate using OpenSSL. openssl genrsa -aes256 -passout pass:foobar -out chesslablab.org.pem 2048 openssl req -passin pass:foobar -new -sha256 -key chesslablab.org.pem -subj \"/C=US/ST=CA/O=ChesslaBlab, Inc./CN=chesslablab.org\" -reqexts SAN -config <(cat /etc/ssl/openssl.cnf <(printf \"[SAN]\\nsubjectAltName=DNS:*.mydomain.org\")) -out chesslablab.org.csr openssl x509 -passin pass:foobar -req -days 365 -in chesslablab.org.csr -signkey chesslablab.org.pem -out chesslablab.org.crt openssl rsa -passin pass:foobar -in chesslablab.org.pem -out chesslablab.org.key The command above will generate four files: chesslablab.org.crt chesslablab.org.csr chesslablab.org.key chesslablab.org.pem Then, chesslablab.org.crt and chesslablab.org.key must be renamed in order to match both the certificate and the key filename created by Certbot. As noted before, it is assumed that Certbot is used to automatically generate the HTTPS certificate so all repositories are configured to read these two files on startup. mv chesslablab.org.crt fullchain.pem mv chesslablab.org.key privkey.pem With the pieces of the puzzle in place, which is to say, the web server, the REST-like API and the asynchronous chess server, it is of vital importance to add the chess server's self-signed certificate as trusted to your browser. Figure 1 . Make the browser trust the chess server's self-signed certificate. If skipping this step, the web browser won't be able to connect to the chess server. The latter will complain with an SSL handshake error. SSL handshake error: stream_socket_enable_crypto(): SSL operation failed with code 1. OpenSSL Error messages: error:14094416:SSL routines:ssl3_read_bytes:sslv3 alert certificate unknown And the web browser will throw an error accordingly. WebSocket connection to 'wss://async.chesslablab.org:8443/' failed Figure 2 . WebSocket connection to 'wss://async.chesslablab.org:8443/' failed. The exact same thing goes for the REST-like API: Its self-signed certificate needs to be added as trusted to your browser. Figure 3 . Make the browser trust the API's self-signed certificate. If skipping this step, the web browser won't be able to connect to the chess API. The latter will complain with an ERR_CERT_AUTHORITY_INVALID error. GET https://api.chesslablab.org/v1/annotations/games net::ERR_CERT_AUTHORITY_INVALID Figure 4 . The browser doesn't recognize the API's certificate. Conclusion In order to run a ChesslaBlab website, a wildcard SSL certificate needs to be issued and installed in the following repos: chesslablab/website chesslablab/chess-api chesslablab/chess-server Certbot can be used to automatically get a free HTTPS certificate, however, if this still sounds too complicated, OpenSSL might be an alternate solution for the development environment.","title":"SSL Certificate Setup"},{"location":"ssl-certificate-setup/#ssl-certificate-setup","text":"Some familiarity with Public Key Infrastructure (PKI) is recommended in order to follow this section. The first thing you need to understand about setting up a ChesslaBlab website is that you have to create an SSL certificate to secure four different domain names at once. chesslablab.org www.chesslablab.org api.chesslablab.org async.chesslablab.org This is because nowadays, major browsers want all traffic to be secure, and as a web developer you want the development environment to mimic production as much as possible. The first two domain names, chesslablab.org and www.chesslablab.org , will point to the IP of the website . When it comes to websites, it is a common practice to create a domain alias that redirects to the primary domain. Hence the two domain names for the website, one starting with www. The api.chesslablab.org domain name will point to the IP of the REST-like API and async.chesslablab.org to the IP of the asynchronous chess server . Use custom domain names to configure your ChesslaBlab site whether you are a chess club, a school, or a FIDE titled player. gmalice.com www.gmalice.com api.gmalice.com async.gmalice.com Probably the easiest way to proceed is to purchase a wildcard certificate from a Certificate Authority (CA) however you may want to consider to get your free certificates using Certbot instead. Be that as it may, keep in mind that before any CA can issue an SSL certificate, a validation process is required to verify that it can be sent to the Certificate Signing Request (CSR) requester. This is typically achieved through one of the following methods. Email Validation \u2014 a validation email is sent to the certificate requester. HTTP Validation \u2014 the certificate requester is asked to upload a validation file at their host. DNS Validation \u2014 the certificate requester sets up a CNAME record in the domain's DNS zone for further validation. I used Certbot to automatically get a free HTTPS certificate. Since the ChesslaBlab website is running on an Ubuntu server, the certificate was validated through DNS as it is described next. sudo certbot certonly --standalone Saving debug log to /var/log/letsencrypt/letsencrypt.log Please enter the domain name(s) you would like on your certificate (comma and/or space separated) (Enter 'c' to cancel): chesslablab.org www.chesslablab.org api.chesslablab.org async.chesslablab.org Requesting a certificate for chesslablab.org and 3 more domains Successfully received certificate. Certificate is saved at: /etc/letsencrypt/live/chesslablab.org-0001/fullchain.pem Key is saved at: /etc/letsencrypt/live/chesslablab.org-0001/privkey.pem This certificate expires on 2024-04-23. These files will be updated when the certificate renews. Certbot has set up a scheduled task to automatically renew this certificate in the background. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - If you like Certbot, please consider supporting our work by: * Donating to ISRG / Let's Encrypt: https://letsencrypt.org/donate * Donating to EFF: https://eff.org/donate-le - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - The certbot command generated two files, fullchain.pem and privkey.pem , that then were installed in each of the repos listed above: chesslablab/website chesslablab/chess-api chesslablab/chess-server It is worth saying that for this to function properly, Certbot's documentation recommends to have a working web site that can already be accessed using HTTP on port 80.","title":"SSL Certificate Setup"},{"location":"ssl-certificate-setup/#self-signed-wildcard-ssl-certificate-with-openssl","text":"If issuing a wildcard certificate with DNS validation sounds too complicated to you, OpenSSL might be an alternate solution for the development environment. You may want to create a self-signed multi-domain SSL certificate using OpenSSL. openssl genrsa -aes256 -passout pass:foobar -out chesslablab.org.pem 2048 openssl req -passin pass:foobar -new -sha256 -key chesslablab.org.pem -subj \"/C=US/ST=CA/O=ChesslaBlab, Inc./CN=chesslablab.org\" -reqexts SAN -config <(cat /etc/ssl/openssl.cnf <(printf \"[SAN]\\nsubjectAltName=DNS:*.mydomain.org\")) -out chesslablab.org.csr openssl x509 -passin pass:foobar -req -days 365 -in chesslablab.org.csr -signkey chesslablab.org.pem -out chesslablab.org.crt openssl rsa -passin pass:foobar -in chesslablab.org.pem -out chesslablab.org.key The command above will generate four files: chesslablab.org.crt chesslablab.org.csr chesslablab.org.key chesslablab.org.pem Then, chesslablab.org.crt and chesslablab.org.key must be renamed in order to match both the certificate and the key filename created by Certbot. As noted before, it is assumed that Certbot is used to automatically generate the HTTPS certificate so all repositories are configured to read these two files on startup. mv chesslablab.org.crt fullchain.pem mv chesslablab.org.key privkey.pem With the pieces of the puzzle in place, which is to say, the web server, the REST-like API and the asynchronous chess server, it is of vital importance to add the chess server's self-signed certificate as trusted to your browser. Figure 1 . Make the browser trust the chess server's self-signed certificate. If skipping this step, the web browser won't be able to connect to the chess server. The latter will complain with an SSL handshake error. SSL handshake error: stream_socket_enable_crypto(): SSL operation failed with code 1. OpenSSL Error messages: error:14094416:SSL routines:ssl3_read_bytes:sslv3 alert certificate unknown And the web browser will throw an error accordingly. WebSocket connection to 'wss://async.chesslablab.org:8443/' failed Figure 2 . WebSocket connection to 'wss://async.chesslablab.org:8443/' failed. The exact same thing goes for the REST-like API: Its self-signed certificate needs to be added as trusted to your browser. Figure 3 . Make the browser trust the API's self-signed certificate. If skipping this step, the web browser won't be able to connect to the chess API. The latter will complain with an ERR_CERT_AUTHORITY_INVALID error. GET https://api.chesslablab.org/v1/annotations/games net::ERR_CERT_AUTHORITY_INVALID Figure 4 . The browser doesn't recognize the API's certificate.","title":"Self-Signed Wildcard SSL Certificate with OpenSSL"},{"location":"ssl-certificate-setup/#conclusion","text":"In order to run a ChesslaBlab website, a wildcard SSL certificate needs to be issued and installed in the following repos: chesslablab/website chesslablab/chess-api chesslablab/chess-server Certbot can be used to automatically get a free HTTPS certificate, however, if this still sounds too complicated, OpenSSL might be an alternate solution for the development environment.","title":"Conclusion"},{"location":"website-architecture/","text":"Website Architecture Some familiarity with JavaScript modules as well as with Symfony's Asset Mapper component is recommended in order to follow this section. The ChesslaBlab website is a multi-page application (MPA) that is not adhering to the MVC architectural pattern. The controller actions are basically sending an HTML document to the browser on each request with the business logic being split between the chess server and the chess API. In this website architecture in particular, there is no model layer (M) and as a result the Controller layer (C) remains quite basic as in the following example. The main reason behind a multi-page architecture like this one as opposed to a single-page architecture is that we want the pages to be indexed by web crawlers. <?php namespace App\\Controller\\Pages\\Play; use Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController; use Symfony\\Component\\HttpFoundation\\Response; class ComputerController extends AbstractController { public function index(): Response { return $this->render('pages/play/computer/index.html.twig'); } } As a rule of thumb, there is a .twig.html file and a .js file associated to each controller action. So the structure of the App\\Controller\\Pages namespace is mirroring the structure of both the templates/pages folder and the assets/js/pages folder. src/Controller/Pages/Play/ComputerController.php templates/pages/play/computer/index.html.twig assets/js/pages/play/computer/index.js This naming convention allows developers to reduce memorization because given one file name, the name of the remaining two can be inferred. Each page's JavaScript file is then set up as an entrypoint in the importmap.php config file. The main point of the entrypoint script is to update the DOM on user interaction and data change.","title":"Website Architecture"},{"location":"website-architecture/#website-architecture","text":"Some familiarity with JavaScript modules as well as with Symfony's Asset Mapper component is recommended in order to follow this section. The ChesslaBlab website is a multi-page application (MPA) that is not adhering to the MVC architectural pattern. The controller actions are basically sending an HTML document to the browser on each request with the business logic being split between the chess server and the chess API. In this website architecture in particular, there is no model layer (M) and as a result the Controller layer (C) remains quite basic as in the following example. The main reason behind a multi-page architecture like this one as opposed to a single-page architecture is that we want the pages to be indexed by web crawlers. <?php namespace App\\Controller\\Pages\\Play; use Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController; use Symfony\\Component\\HttpFoundation\\Response; class ComputerController extends AbstractController { public function index(): Response { return $this->render('pages/play/computer/index.html.twig'); } } As a rule of thumb, there is a .twig.html file and a .js file associated to each controller action. So the structure of the App\\Controller\\Pages namespace is mirroring the structure of both the templates/pages folder and the assets/js/pages folder. src/Controller/Pages/Play/ComputerController.php templates/pages/play/computer/index.html.twig assets/js/pages/play/computer/index.js This naming convention allows developers to reduce memorization because given one file name, the name of the remaining two can be inferred. Each page's JavaScript file is then set up as an entrypoint in the importmap.php config file. The main point of the entrypoint script is to update the DOM on user interaction and data change.","title":"Website Architecture"},{"location":"websocket-connection/","text":"WebSocket Connection The ChesslaBlab website is integrated with PHP Chess Server , an asynchronous WebSocket server that provides functionality to play chess online over a WebSocket connection. The environment variables required for the chess server can be found in the assets/env.example.js file. As described in the docs , these are the game modes available: analysis is used to start games for further analysis. play allows to play chess online with other players. stockfish allows to play chess against the computer. The WebSocket ESM modules are implemented based on this same separation of concerns and abstraction: assets/js/AnalysisWebSocket.js assets/js/PlayWebSocket.js assets/js/StockfishWebSocket.js Let's say you wanted to study a particular chess opening, then a chess game in analysis mode is to be started. Figure 1 . Click on Openings > ECO Code and select \"D77 Neo-Gr\u00fcnfeld Defense: Classical Variation, Modern Defense\" Data: /start classical analysis \"{\\\"movetext\\\":\\\"1.d4 Nf6 2.Nf3 g6 3.g3 Bg7 4.Bg2 O-O 5.O-O d5 6.c4 dxc4\\\"}\" { \"variant\": \"classical\", \"mode\": \"analysis\", \"turn\": \"w\", \"movetext\": \"1.d4 Nf6 2.Nf3 g6 3.g3 Bg7 4.Bg2 O-O 5.O-O d5 6.c4 dxc4\", \"fen\": [ \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\", \"rnbqkbnr/pppppppp/8/8/3P4/8/PPP1PPPP/RNBQKBNR b KQkq d3\", \"rnbqkb1r/pppppppp/5n2/8/3P4/8/PPP1PPPP/RNBQKBNR w KQkq -\", \"rnbqkb1r/pppppppp/5n2/8/3P4/5N2/PPP1PPPP/RNBQKB1R b KQkq -\", \"rnbqkb1r/pppppp1p/5np1/8/3P4/5N2/PPP1PPPP/RNBQKB1R w KQkq -\", \"rnbqkb1r/pppppp1p/5np1/8/3P4/5NP1/PPP1PP1P/RNBQKB1R b KQkq -\", \"rnbqk2r/ppppppbp/5np1/8/3P4/5NP1/PPP1PP1P/RNBQKB1R w KQkq -\", \"rnbqk2r/ppppppbp/5np1/8/3P4/5NP1/PPP1PPBP/RNBQK2R b KQkq -\", \"rnbq1rk1/ppppppbp/5np1/8/3P4/5NP1/PPP1PPBP/RNBQK2R w KQ -\", \"rnbq1rk1/ppppppbp/5np1/8/3P4/5NP1/PPP1PPBP/RNBQ1RK1 b - -\", \"rnbq1rk1/ppp1ppbp/5np1/3p4/3P4/5NP1/PPP1PPBP/RNBQ1RK1 w - d6\", \"rnbq1rk1/ppp1ppbp/5np1/3p4/2PP4/5NP1/PP2PPBP/RNBQ1RK1 b - c3\", \"rnbq1rk1/ppp1ppbp/5np1/8/2pP4/5NP1/PP2PPBP/RNBQ1RK1 w - -\" ] } The JavaScript code for this example can be found in the assets/js/pages/openings/eco_code/index.js file. import { openingsEcoCodeModal } from './OpeningsEcoCodeModal.js'; import { sanWebSocket } from '../../../SanWebSocket.js'; await sanWebSocket.connect(); sessionStorage.clear(); openingsEcoCodeModal.props.modal.show(); The JavaScript code in the index.js file basically boils down to initialization. The business logic is implemented by a WebSocket ESM module. When the web browser retrieves the response from the WebSocket server, the ESM components are updated with the new data. In this particular case, the chessboard and the SAN panel are updated on chess opening selection. Remember, the structure of the App\\Controller\\Pages namespace is mirroring the structure of both the templates/pages folder and the assets/js/pages folder. There is a .twig.html file and a .js file associated to each controller action. This naming convention allows developers to reduce memorization because given one file name, the name of the remaining two can be inferred. src/Controller/Pages/Openings/EcoCodeController.php templates/pages/openings/eco_code/index.html.twig assets/js/pages/openings/eco_code/index.js Similarly, if you wanted to study a chess position, then a FEN string needs to be started. Figure 2 . Click on Learn > Analysis Board and enter a classical chess position in FEN format. Data: /start classical analysis \"{\\\"fen\\\":\\\"r2q1r1k/1b1nN2p/pp3pp1/8/Q7/PP5P/1BP2RPN/7K w - -\\\",\\\"movetext\\\":\\\"\\\"}\" { \"variant\": \"classical\", \"mode\": \"analysis\", \"turn\": \"w\", \"movetext\": \"\", \"fen\": [ \"r2q1r1k/1b1nN2p/pp3pp1/8/Q7/PP5P/1BP2RPN/7K w - -\" ] } The JavaScript code for this example can be found in the assets/js/pages/learn/analysis/index.js file. import { FEN } from '@chesslablab/chessboard'; import { gameForm } from './GameForm.js'; import { analysisWebSocket } from '../../../AnalysisWebSocket.js'; import * as mode from '../../../../mode.js'; await analysisWebSocket.connect(); sessionStorage.clear(); analysisWebSocket.send(`/start classical ${mode.ANALYSIS}`); The two examples above will give you a sense of the request-response cycle between the web browser and the chess server.","title":"WebSocket Connection"},{"location":"websocket-connection/#websocket-connection","text":"The ChesslaBlab website is integrated with PHP Chess Server , an asynchronous WebSocket server that provides functionality to play chess online over a WebSocket connection. The environment variables required for the chess server can be found in the assets/env.example.js file. As described in the docs , these are the game modes available: analysis is used to start games for further analysis. play allows to play chess online with other players. stockfish allows to play chess against the computer. The WebSocket ESM modules are implemented based on this same separation of concerns and abstraction: assets/js/AnalysisWebSocket.js assets/js/PlayWebSocket.js assets/js/StockfishWebSocket.js Let's say you wanted to study a particular chess opening, then a chess game in analysis mode is to be started. Figure 1 . Click on Openings > ECO Code and select \"D77 Neo-Gr\u00fcnfeld Defense: Classical Variation, Modern Defense\" Data: /start classical analysis \"{\\\"movetext\\\":\\\"1.d4 Nf6 2.Nf3 g6 3.g3 Bg7 4.Bg2 O-O 5.O-O d5 6.c4 dxc4\\\"}\" { \"variant\": \"classical\", \"mode\": \"analysis\", \"turn\": \"w\", \"movetext\": \"1.d4 Nf6 2.Nf3 g6 3.g3 Bg7 4.Bg2 O-O 5.O-O d5 6.c4 dxc4\", \"fen\": [ \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\", \"rnbqkbnr/pppppppp/8/8/3P4/8/PPP1PPPP/RNBQKBNR b KQkq d3\", \"rnbqkb1r/pppppppp/5n2/8/3P4/8/PPP1PPPP/RNBQKBNR w KQkq -\", \"rnbqkb1r/pppppppp/5n2/8/3P4/5N2/PPP1PPPP/RNBQKB1R b KQkq -\", \"rnbqkb1r/pppppp1p/5np1/8/3P4/5N2/PPP1PPPP/RNBQKB1R w KQkq -\", \"rnbqkb1r/pppppp1p/5np1/8/3P4/5NP1/PPP1PP1P/RNBQKB1R b KQkq -\", \"rnbqk2r/ppppppbp/5np1/8/3P4/5NP1/PPP1PP1P/RNBQKB1R w KQkq -\", \"rnbqk2r/ppppppbp/5np1/8/3P4/5NP1/PPP1PPBP/RNBQK2R b KQkq -\", \"rnbq1rk1/ppppppbp/5np1/8/3P4/5NP1/PPP1PPBP/RNBQK2R w KQ -\", \"rnbq1rk1/ppppppbp/5np1/8/3P4/5NP1/PPP1PPBP/RNBQ1RK1 b - -\", \"rnbq1rk1/ppp1ppbp/5np1/3p4/3P4/5NP1/PPP1PPBP/RNBQ1RK1 w - d6\", \"rnbq1rk1/ppp1ppbp/5np1/3p4/2PP4/5NP1/PP2PPBP/RNBQ1RK1 b - c3\", \"rnbq1rk1/ppp1ppbp/5np1/8/2pP4/5NP1/PP2PPBP/RNBQ1RK1 w - -\" ] } The JavaScript code for this example can be found in the assets/js/pages/openings/eco_code/index.js file. import { openingsEcoCodeModal } from './OpeningsEcoCodeModal.js'; import { sanWebSocket } from '../../../SanWebSocket.js'; await sanWebSocket.connect(); sessionStorage.clear(); openingsEcoCodeModal.props.modal.show(); The JavaScript code in the index.js file basically boils down to initialization. The business logic is implemented by a WebSocket ESM module. When the web browser retrieves the response from the WebSocket server, the ESM components are updated with the new data. In this particular case, the chessboard and the SAN panel are updated on chess opening selection. Remember, the structure of the App\\Controller\\Pages namespace is mirroring the structure of both the templates/pages folder and the assets/js/pages folder. There is a .twig.html file and a .js file associated to each controller action. This naming convention allows developers to reduce memorization because given one file name, the name of the remaining two can be inferred. src/Controller/Pages/Openings/EcoCodeController.php templates/pages/openings/eco_code/index.html.twig assets/js/pages/openings/eco_code/index.js Similarly, if you wanted to study a chess position, then a FEN string needs to be started. Figure 2 . Click on Learn > Analysis Board and enter a classical chess position in FEN format. Data: /start classical analysis \"{\\\"fen\\\":\\\"r2q1r1k/1b1nN2p/pp3pp1/8/Q7/PP5P/1BP2RPN/7K w - -\\\",\\\"movetext\\\":\\\"\\\"}\" { \"variant\": \"classical\", \"mode\": \"analysis\", \"turn\": \"w\", \"movetext\": \"\", \"fen\": [ \"r2q1r1k/1b1nN2p/pp3pp1/8/Q7/PP5P/1BP2RPN/7K w - -\" ] } The JavaScript code for this example can be found in the assets/js/pages/learn/analysis/index.js file. import { FEN } from '@chesslablab/chessboard'; import { gameForm } from './GameForm.js'; import { analysisWebSocket } from '../../../AnalysisWebSocket.js'; import * as mode from '../../../../mode.js'; await analysisWebSocket.connect(); sessionStorage.clear(); analysisWebSocket.send(`/start classical ${mode.ANALYSIS}`); The two examples above will give you a sense of the request-response cycle between the web browser and the chess server.","title":"WebSocket Connection"}]}